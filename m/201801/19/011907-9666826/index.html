<!DOCTYPE html>



 <html class="no-js"> 
<head>
    <title>到底什麼是「區塊鏈」？這麼一解釋你就明白了 &middot; ZNews</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">

    
    <meta property="og:image" content="https://pic4.zhimg.com/v2-288842774709817f9256b06ad3d5dd1f.jpg">
    <meta property="og:type" content="article">
    

    
    <meta property="og:url" content="http://znews.site/m/201801/19/011907-9666826/">
    

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="http://znews.site/css/main.css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700|Lora:400,700,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/tomorrow.min.css" />
    
</head>
<body>

    <div class="off-canvas">
    <figure class="avatar">
        <img src="http://znews.site/img/zicon.png" title="">
    </figure>
    <div class="bio">
        
        
    </div>
    <nav>

        

        

        <ul>
            <li><a target="_blank" href="http://znews.site/index.xml">RSS feed</a></li>
            <li><a href="mailto:admin@znews.site" target="_top">Contact us</a></li>
        </ul>

        

        <ul>
        
        </ul>
    </nav>
</div>


    <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
    <script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    </script>

    <script>
    googletag.cmd.push(function() {
      googletag.defineSlot('/23865961/testad1', [300, 250], 'div-gpt-ad-1470795637655-0').addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
    </script>

    <div class="site-wrapper">
        <header>
	<div class="h-wrap">
		
		<h1 class="title"><a href="http://znews.site/">ZNews</a></h1>
		
		<a class="menu-icon" title="Menu"><span class="lines"></span></a>
	</div>
</header>

        <section class="single-wrap">
            <article class="single-content" itemscope itemtype="//schema.org/BlogPosting">
                <div class="feat">
                    <h5 class="page-date">
                    <time datetime="" itemprop="datePublished">
                    19. January 2018
                    </time>
                    </h5>
                </div>
                <h1 class="page-title" itemprop="name headline">到底什麼是「區塊鏈」？這麼一解釋你就明白了</h1>

                <div id='div-gpt-ad-1470795637655-0' style='height:250px; width:300px;'>
                <script>
                googletag.cmd.push(function() { googletag.display('div-gpt-ad-1470795637655-0'); });
                </script>
                </div>

                <div itemprop="articleBody">
                    <div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title">區塊鏈是什麼，如何簡單易懂地介紹區塊鏈？</h2>

<div class="answer">



<div class="content">
<p><em><strong>特別提醒</strong>：比特幣採用區塊鏈技術，但是區塊鏈並不等同於比特幣；全篇基於比特幣底層區塊鏈技術講述，所以，部分模型可能不適用於以太坊等。另外，由於文章採用了一定的抽象、類舉的敘事方式，中間或多或少有些地方會跟區塊鏈底層嚴謹的技術實現有出入，如果讓你覺得困惑，可以在評論下方留言或者私信我一起探討。最後，也是受限於自己知識結構的不完整，這篇文章會隨着我對區塊鏈更深入認識後，隨時進行修訂，最後更新時間可參考該回答下方的時間戳。</em></p>
<p><em>---</em></p>
<p>首先不要把區塊鏈想的過於高深，他是一個分佈在全球各地、能夠協同運轉的數據庫存儲系統，區別於傳統數據庫運作——讀寫權限掌握在一個公司或者一個集權手上（中心化的特徵），區塊鏈認爲，任何有能力架設服務器的人都可以參與其中。來自全球各地的掘金者在當地部署了自己的服務器，並連接到區塊鏈網絡中，成爲這個分佈式數據庫存儲系統中的一個節點；一旦加入，該節點享有同其他所有節點完全一樣的權利與義務（去中心化、分佈式的特徵）。與此同時，對於在區塊鏈上開展服務的人，可以往這個系統中的任意的節點進行讀寫操作，最後全世界所有節點會根據某種機制的完成一次又依次的同步，從而實現在區塊鏈網絡中所有節點的數據完全一致。</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-718333f106a3ba4597bafd533d7e9f77_b.jpg" alt="">
<p><strong># 問題的由來</strong></p>
<p>我們反覆提到區塊鏈是一個去中心化的系統，確實，「去中心化」在區塊鏈世界裏面是一個很重要的概念，很多模型（比如賬本的維護、貨幣的發行、時間戳的設計、網絡的維護、節點間的競爭等等等等）的設計都依賴於這個中心思想，那到底什麼是去中心化呢？在解釋真正去中心化之前，我們還是先簡單瞭解下什麼是中心化吧。</p>
<p><strong>中心化？</strong></p>
<p>回憶一下你在網上購買一本書的流程：</p>
<ol><li>第一步，你下單並把錢打給<strong>支付寶</strong>；</li>
<li>第二步，<strong>支付寶</strong>收款後通知賣家可以發貨了；</li>
<li>第三步，賣家收到<strong>支付寶</strong>通知之後給你發貨；</li>
<li>第四步，你收到書之後，覺得滿意，在<strong>支付寶</strong>上選擇確認收貨；</li>
<li>第五步，<strong>支付寶</strong>收到通知，把款項打給賣家。流程結束。</li>
</ol><p>你會發現，雖然你是在跟賣家做交易，但是，所有的關鍵流程都是在跟支付寶打交道。這樣的好處在於：萬一哪個環節出問題，賣家和買家都可以通過支付寶尋求幫助，讓支付寶做出仲裁。這就是一個最簡單的基於中心化思維構建的交易模型，它的價值顯著，就是建立權威，通過權威背書來獲得多方的信任，同時依賴權威方背後的資本和技術實力確保數據的可靠安全。</p>
<p>你一定會擺出一個巨大的問號臉 ⊙.⊙?——“通過權威背書來獲得多方的信任，同時依賴權威方背後的資本和技術實力確保數據的可靠安全”，真的可以嘛？！</p>
<p>假如說，支付寶程序發生重大 BUG，導致一段時間內的轉賬記錄全部丟失，或者更徹底一點，支付寶的服務器被金三胖的一個導彈全部炸燬了。而我剛剛轉出去的 100 元找誰說理去，這個時候，你就成了刀殂上的魚肉；支付寶有良心，會勉爲其難承認你剛剛轉賬的事實，但他不承認你也沒轍，因爲確實連他自己也不知道這筆轉賬是否真實存在。</p>
<p>上述就是中心化最大的弊端——過分依賴中心和權威，也就意味着逐漸喪失自己的話語權。</p>
<p><strong>去中心化？</strong></p>
<p>那麼去中心化的形態是什麼樣子呢？還是拿剛纔那個例子繼續，我們構建一個極簡的去中心化的交易系統，看看我們是如何在網絡上從不認識的賣家手裏買到一本書的。</p>
<ol><li>第一步，你下單並把錢打給賣家；</li>
<li>第二步，你將這條轉賬信息記錄在自己賬本上；</li>
<li>第三步，你將這條轉賬信息廣播出去；</li>
<li>第四步，賣家和支付寶在收到你的轉賬信息之後，在他們自己的賬本上分別記錄；</li>
<li>第五步，賣家發貨，同時將發貨的事實記錄在自己的賬本上；</li>
<li>第六步，賣家把這條事實記錄廣播出去；</li>
<li>第七步，你和支付寶收到這條事實記錄，在自己的賬本上分別記錄；</li>
<li>第八步，你收到書籍。至此，交易流程走完。</li>
</ol><p>剛纔“人爲刀俎我爲魚肉”的情況在這個體系下就比較難發生，因爲所有人的賬本上都有着完全一樣的交易記錄，支付寶的賬本服務器壞了，對不起賣家的賬本還存在，我的賬本還存在；這些都是這筆交易真實發生的鐵證。</p>
<p>當然，在這套極簡的交易系統中，你已經發現了諸多漏洞和不理解，比如說三方當中有一個是壞人，他故意記錄了對他更有利的轉賬信息怎麼辦；又比如說消息在傳遞過程中被黑客篡改了怎麼辦等等等等。這在以往的計算機概論或者計算機網絡書本上中可能都有提及到——“類兩軍”和“拜占庭將軍”問題。這裏就不打算贅述，因爲暫時跟主線不相關，感興趣的同學可以去 Google 或者百度一下，你只需要知道，在我們下面即將展開講到的區塊鏈系統中，通過巧妙的設計，足以解決上述存在的 BUG。</p>
<p>既然話已說到這份上，相信瞭解一點技術、特別是有運維背景的同學大概能夠從極簡交易系統中窺視到了更多區塊鏈的一些影子——</p>
<ol><li>分佈式存儲，通過多地備份，製造數據冗餘</li>
<li>讓所有人都有能力都去維護共同一份數據庫</li>
<li>讓所有人都有能力彼此監督維護數據庫的行爲</li>
</ol><p>在我看來，你猜測的基本上沒錯。其實這些就是區塊鏈技術最核心的東西，外人看起來高大上、深不可測，但探究其根本發現就是這麼簡單和淳樸。當然，這裏面肯定會有很多很多很多細枝末節的技術需要重構。</p>
<p>如果你差不多認同上面的觀點，那我們應該基本上可以達成共識，分佈式部署肯定是構建去中心化網絡理所當然的解決方向——通過 P2P 協議將全世界所有節點計算機彼此相互連接，形成一張密密麻麻的網絡；以巧妙的機制，通過節點之間的交易數據同步來保證全球計算機節點的數據共享和一致。</p>
<p>哈哈，說的輕巧，“交易數據這麼重要的東西，在一個完全不信任的 P2P 網絡節點中以一種錯綜複雜的方式傳遞，數據的一致性和安全性誰來保證，如果說互相監督，他們到底怎麼做到？”</p>
<p>好了，不賣關子了，下面讓我們圍繞這個最最最最直接的問題開始進入到真正區塊鏈的世界，抽絲剝繭看看它到底是如何一步一步形成的，又是如何一步一步穩定運轉。</p>
<p><strong># 從全球節點到交易數據</strong></p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-a5b175bd7956cb7eb58cd2bfd3cf4f2e_b.jpg" alt="">
<p>這張圖的製作的意義爲的是幫助你在宏觀上先快速理解區塊鏈中所涉及到的相關名詞以及他們的層級關係。同時，文章的知識結構和設計思路也大抵上也會按照：</p>
<ol><li>首先，將區塊作爲最小單位體，講述極簡區塊鏈系統是如何運轉的；</li>
<li>接着，進入到比區塊更小單位體——交易記錄，理解區塊鏈是如何處理數據的；</li>
<li>最後，將所有知識點柔和在一起，重回到區塊和區塊鏈，完整講述整個工作流程。</li>
</ol><p>希望你在這個引導和結構下有一個比較好的閱讀體驗。Let's go~</p>
<p><strong># 區塊，混沌世界的起源</strong></p>
<p>既然已經達成共識，所以，我們事先構建好了一個去中心化的 P2P 網絡；同時，爲了讓讀者朋友們聽起來更輕鬆，我先粗暴的規定在這個極簡的區塊鏈系統裏，每十分鐘有且僅產生一筆交易。</p>
<p>故事繼續，在節點的視野裏，大概每十分鐘會憑空產生一個建立在自己平行宇宙世界的神奇區塊（你可以將區塊想象爲一個盒子），這個區塊裏放着一些數字貨幣以及一張小紙條，小紙條上記錄了這十分鐘內產生的那唯一一筆交易信息，比如說——“小 A 轉賬給了小 B100 元”；當然，這段信息肯定是被加密處理過的，爲的就是保證只有小 A 和小 B（通過他們手上的鑰匙）纔有能力解讀裏面真正的內容。</p>
<p>這個神奇的區塊被創造出來之後，很快被埋在了地底下，至於埋在哪裏？沒有一個人不知道，需要所有計算機節點一起參與進來掘地三尺後纔有可能找到（找到一個有效的工作量證明）。顯然，這是一件工作量巨大、成果隨機的事件。但是呢，對於計算機節點來說，一旦從地底下挖出這個區塊，他將獲得區塊內價值不菲的數字貨幣，以及“小 A 轉賬給了小 B100 元”過程中小 A 所支付的小費。同時，對於這個節點來說，也只有他纔有權利真正記錄小紙條裏的內容，這是一份榮耀，而其他節點相當於只能使用它的複製品，一個已經沒有數字貨幣加持的副本。當然這個神奇的區塊還有一些其他很特別的地方，後面我們會再細細聊。</p>
<p>爲了更好的描述，我們將計算機節點從地底下挖出區塊的過程叫做「挖礦」，剛纔說了，這是一件工作量巨大、運氣成分較多、但收益豐厚的事兒。</p>
<p>過了一會兒，來自中國上海浦東新區張衡路上的一個節點突然跳出來很興奮的說：“ 我挖到區塊了！裏面的小紙條都是有效的！獎勵歸我！” 。雖然此刻張衡路節點已經拿到了數字貨幣，但對於其他計算機節點來說，因爲這裏面還涉及到其他一些利益瓜葛，他們不會選擇默認相信張衡路節點所說的話；基於陌生節點彼此不信任的原則，他們拿過張衡路節點所謂挖到的區塊（副本），開始校驗區塊內的小紙條信息是否真實有效等等。在區塊鏈世界裏，節點們正是通過校驗小紙條信息的準確性，或間接或直接判斷成功挖出區塊的節點是否撒謊。（如何定義小紙條信息真實有效，後面會講解，這裏暫不做贅述）。</p>
<p>在校驗過程中，各個節點們會直接通過下面兩個行爲表達自己對張衡路節點的認同（準確無誤）和態度：</p>
<ul><li>停止已經進行了一半甚至 80%的挖礦進程；</li>
<li>將張衡路節點成功挖出的區塊（副本）追加到自己區塊鏈的末尾。</li>
</ul><p>你可以稍微有點困惑：停止可能已經執行了 80%的挖礦行爲，那之前 80%的工作不是就白做了嘛？！然後，區塊鏈的末尾又是個什麼鬼東西？</p>
<p>對於第一個困惑。我想說，你說的一點沒錯，但是沒辦法，現實就是這麼殘酷，即便工作做了 80%，那也得放棄，這 80%的工作勞苦幾乎可以視爲無用功，絕對的傷財勞衆。第二個困惑，區塊鏈和區塊鏈的末尾是什麼鬼？這裏因爲事先並沒有講清楚，但是你可以簡單想象一下：區塊是週期性不斷的產生和不斷的被挖出來，一個計算機節點可能事先已經執行了 N 次“從別人手上拿過區塊 -&gt; 校驗小紙條有效性”的流程，肯定在自己的節點上早已經存放了 N 個區塊，這些區塊會按照時間順序整齊的一字排列成爲一個鏈狀。沒錯，這個鏈條，就是你一直以來認爲的那個區塊鏈。如果你還是不能夠理解，沒關係，文章後面還會有很多次機會深入研究。</p>
<p><strong># 走進區塊內，探索消息的本質</strong></p>
<p>上面我們構建了一個最簡單的區塊鏈世界的模型，相信大多數同學都已經輕鬆掌握了。但是別驕傲也彆着急，這還只是一些皮毛中的皮毛，坐好，下面我們準備開車了。</p>
<p>前面我們說到“大概每十分鐘會憑空產生一個神奇的區塊，這個區塊裏放了一張小紙條，上面記錄了這十分鐘內產生的這唯一一筆交易信息”。顯然，十分鐘內產生的交易肯定遠不止一條，可能是上萬條，這上萬條數據在區塊鏈世界是如何組織和處理的呢？另外，爲什麼在紙條上記錄的只是某一次的交易信息，而不是某一個人的餘額？餘額好像更符合我們現實世界的理解纔對。</p>
<p>既然存在這樣那樣的疑問。現在我們就把視線暫時從“區塊”、“區塊鏈”這些看起來似乎較大實體的物質中移開，進入到區塊內更微觀的世界裏一探究竟，看看小紙條到底是怎麼一回事，它的產生以及它終其一生的使命：</p>
<ol><li>發起交易的時候，發起人會收到一張小紙條，他需要將交易記錄比如說“盜盜轉賬給張三 40 元”寫在紙上。說來也神奇，當寫完的那一剎那，在小紙條的背面會自動將這段交易記錄格式化成至少包含了“輸入值”和“輸出值”這兩個重要字段；“輸入值”用於記錄數字貨幣的有效來源，“輸出值”記錄着數字貨幣發往的對象。</li>
<li>剛剛創建的小紙條立馬被標記成爲“<strong>未確認</strong>”的小紙條。從地下成功挖出區塊並最終連接到區塊鏈裏的小紙條一開始會被標記爲“<strong>有效</strong>”。若這條有效的小紙條作爲其他交易的輸入值被使用，那麼，這個有效的小紙條很快會被標記爲“<strong>無效</strong>”。因爲各種原因，區塊從鏈上斷開、丟棄，曾經這個區塊內被標記爲“有效”的小紙條會被重新標記爲“未確認”。</li>
<li>區塊鏈裏面沒有賬戶餘額的概念，你真正擁有的數字資產實際上是一段交易信息；通過簡單的加減法運算獲知你數字錢包裏的餘額。</li>
</ol><p>上面的 1、2、3 僅僅作爲結論一開始強行灌輸給你的知識點，其中有幾個描述可能會有點繞，讓你覺得雲裏霧裏，沒有關係，因爲我們立刻、馬上就開始會細說裏面的細枝末節。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-9b6d8ac951f48d7cd31b7d4f3e266c69_b.jpg" alt="">
<p>上圖就是從無數打包進區塊內的小紙條中，抽取出來的一張，以及它最終被格式化後的縮影。單看右側的圖可能很容易產生誤會，雖然看起來有多行，但實際上就是“盜盜轉賬給張三 40 個比特幣”這一條交易數據另外的一種呈現形態。因爲區塊鏈世界裏面這麼規定，每一條交易記錄，必須有能力追溯到交易發起者 發起這筆交易、其中所涉及金額的上一筆全部交易信息；即這筆錢從何而來的問題。這其實很容易理解，在去中心化的網絡中，通過建立交易鏈、和通過交易鏈上的可溯源性間接保證數據安全和有效。</p>
<p>我們繼續看，在區塊鏈世界裏，我們是如何僅通過“盜盜轉賬給張三 40 個比特幣” 這條交易信息完成轉賬流程的。其實跟現實中你在路邊買一個包子的流程大抵上相同。</p>
<p><strong>第一步：判斷是否有足夠的餘額完成交易</strong></p>
<p>這裏我們再一次重申，區塊鏈世界是沒有餘額的概念，餘額是通過簡單數字的加減最終獲得，你擁有所謂的數字貨幣實際上是因爲你擁一條交易記錄，即 “盜盜轉賬給張三 40 個比特幣”！這裏，我們還是拿這條記錄說事：</p>
<p>追溯“輸出值”是“盜盜”相關的<strong>全部有效交易記錄</strong>作爲，對有效交易中的數字進行簡單求和，判斷是否大於等於 40，如果確實大於等於，則將這些有效的交易記錄合併形成一條新的交易記錄（如下圖）。如果小於 40，其實可以不需要再繼續往下探討。</p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-90202117662d6ffef784185525b7573e_b.jpg" alt="">
<p>就上圖的例子，我們追溯到曾經轉賬給盜盜的<strong>有效交易記錄</strong>有“小 A 轉賬給盜盜 10 btc”、“小 B 轉賬給盜盜 20 btc”、“小 C 轉賬給盜盜 25 btc”，我們需要將這三條交易記錄合併成一條更復雜描述的交易記錄，即 “( 小 A 轉賬給盜盜 10 btc + 小 B 轉賬給盜盜 20 btc + 小 C 轉賬給盜盜 25 btc ) 轉賬給張三 40 btc ”</p>
<p><strong>第二步：判斷是否需要找零</strong></p>
<p>對追溯到的有效交易數字求和，如果發現大於需要支付的金額，需要將多出的數字重新支付給自己，相當於找零。對應生成了一條全新的交易記錄（如下圖）。</p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-7b564661d4e1d6693ed89b71e0c68192_b.jpg" alt="">
<p>就上圖例子來說，我們最後合併成的交易記錄 “( 小 A 轉賬給盜盜 10 btc + 小 B 轉賬給盜盜 20 btc + 小 C 轉賬給盜盜 25 btc + 盜盜轉賬給盜盜 15 btc ) 轉賬給張三 40 btc ” 事實上等同於“盜盜轉賬給張三 40 btc”。其中“盜盜轉賬給盜盜 15 btc”就可以理解找零。</p>
<p><strong>第三步：發出去，讓全球節點認同和備份小紙條</strong></p>
<p>這條內部重新處理過的複雜交易記錄被塞進區塊，埋到地下，等待節點挖出來，一旦區塊被挖礦成功，並且該區塊最終被連在了區塊鏈的主鏈上。張三將最終擁有了這條交易記錄，而先前的“小 A 轉賬給盜盜 10 btc” 、“小 B 轉賬給盜盜 20 btc” 、“小 C 轉賬給盜盜 25 btc”都將被視爲已經使用過的交易記錄——從此被貼上“無效”的標籤，意味着這些交易記錄將永遠不會再被追溯到。</p>
<p>我們最後一次重申，只是希望讓你加深印象：擁有數字貨幣=擁有交易記錄！</p>
<p><strong>通過設計巧妙的精巧密碼學保證數據安全</strong></p>
<p>記錄着交易信息的小紙條藉助區塊這個載體，在分佈式的網絡中以不同的軌跡錯綜複雜的傳遞，我們前面說了，你真正擁有的數字資產實際上是一段交易信息，而不是你常規意義上理解的貨幣。所以這個過程就需要重點解決兩個問題：</p>
<ul><li>接受到的這條交易記錄在傳輸過程沒有被其他人所篡改</li>
<li>接受到的這條交易記錄確實是由發起交易的人所創造</li>
</ul><p>在這裏，我們需要事先引入兩個知識點，可能稍微有點難消化，但都是計算機領域較爲成熟的和基礎的概念。</p>
<p>第一個知識點：Hash()函數。你只需要知道，任意長度的字符串、甚至文件體本身經過 Hash 函數工廠的加工，都會輸出一個固定長度的字符串；同時，輸入的字符串或者文件稍微做一丟丟的改動，Hash() 函數給出的輸出結果都將發生翻天覆地的改變。注意，Hash()函數是公開的，任何人都能使用。</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-c9ae46fb889b14065f7988e3db803777_b.jpg" alt="">
<p>第二個知識點：非對稱加密。你也只需要瞭解，任何人手裏都有兩把鑰匙，其中一把只有自己知道，叫做“私鑰”，以及一把可以公佈於衆，叫做“公鑰”；通過私鑰加密的信息，必須通過公鑰才能解密，連自己的私鑰也無解。公鑰可以通過私鑰生成多把。</p>
<p>有了這些知識點的加持，上面兩個問題開始變得有解。下面我們來看下內部是如何扭轉和工作的吧，這裏拿“小 A 轉賬給了小 B 100 元錢” 舉例：</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-5491adb338c4d680f05797525b452e6d_b.jpg" alt="">
<ol><li><strong>第一步</strong>：小 A 會先用 Hash 函數對自己的小紙條進行處理，得到一個固定長度的字符串，這個字符串就等價於這張小紙條。</li>
<li><strong>第二步</strong>：小 A 使用只有自己知道的那一把私鑰，對上面固定長度的字符串進行再加密，生成一份名叫數字簽名的字符串，這份數字簽名能夠充分證明是基於這張小紙條的。你可以這麼理解，在現實中，你需要對某一份合同的簽署，萬一有人拿你曾經在其他地方留下的簽名複製粘貼過來怎麼辦？！最好的辦法，就是在你每一次簽名的時候，故意在字跡當中留下一些同這份合同存在某種信息關聯的小細節，通過對小細節的觀察可以知道這個簽名有沒有被移花接木。步驟一和步驟二的結合就是爲了生成這樣一份有且僅針對這條小紙條有效的簽名。</li>
<li><strong>第三步：</strong>小 A 將「明文的小紙條」、剛剛加密成功的「數字簽名」，以及自己那把可以公佈於衆的「公鑰」打包一起發給小 B。</li>
<li><strong>第四步：</strong>當小 B 收這三樣東西，首先會將明文的小紙條進行 Hash()處理，得到一個字符串，我們將其命名爲“字符串 1”。然後，小 B 使用小 A 公佈的公鑰，對發過來的數字簽名進行解密，得到另外一個“字符串 2”。通過比對“字符串 1”和“字符串 2”的一致性，便可充分證明：小 B 接受到的小紙條就是小 A 發出來的小紙條，這張小紙條在中途沒有被其他人所篡改；且這張小紙條確實是由小 A 所編輯。</li>
</ol><p>可以看得出來，加解密的過程幾乎是一環套一環，中途任何環節被篡改，結果都是大相徑庭。藉助這一連串的機制，其實已經能夠很好的在公開、匿名、彼此不信任的分佈式網絡環境中解決數字交易過程中可能遇到的很多問題。這個環節可能確實有點難理解，現在，我需要你停下來，靜下心，花上幾分鐘閉目慢慢回味其中設計精湛的地方。</p>
<p>掌握了這部分知識以後，我們在這裏回答一下前面沒有解釋清楚的問題，「節點對區塊的檢驗」檢驗的到底是什麼？實際上就是：</p>
<ul><li>檢驗區塊內的交易記錄簽名是否準確（是否被篡改）</li>
<li>檢驗區塊內的交易記錄輸入值是否“有效”（是否使用過）</li>
<li>檢驗區塊內的交易記錄輸入值的數字之和是否大於等於輸出值的數字</li>
<li>…</li>
</ul><p><strong># 重回“區塊”和“區塊鏈”的世界</strong></p>
<p>好了，對小紙條和交易記錄的研究我們點到爲止，其實信息量已經是巨大的了，讓我們合上蓋子，重回較大實體、繼續聊聊“區塊”和“區塊鏈”的話題。還記得，咱們在一開始講到關於區塊的特徵嗎？區塊創造後被埋在地下，需要經過節點們馬不停蹄的挖採、而且是憑運氣的挖採纔有可能獲得——不僅僅如此，事實上他還有其他很多神奇的地方，比如說：</p>
<ol><li>憑空產生的區塊在剛剛創建的時候會形成一股強大的黑洞效應，它會嘗試將這段時間全世界各個節點上產生的所有小紙條（交易記錄）統統吸進來；在合上區塊蓋子之前，同時會在區塊內放上一些數字貨幣以及其他一些東西。</li>
<li>區塊擁有一個唯一的 ID，但它只會在這個區塊被節點成功從地下挖出來之後創建。這個 ID 至少會跟「區塊內所有小紙條的集合」、「即將與之相連的上一個區塊 ID」以及「挖礦節點的運氣值」等因素相關。既然前面我們已經簡單瞭解了“Hash()函數”這個東西，這裏不妨透露給大家：“區塊 ID = Hash(‘區塊內所有小紙條的集合’+’即將與之相連的上一個區塊 ID’+‘挖礦節點的運氣值’+’…’)” ；基於先前掌握的知識，然後你應該知道區塊內任意一張小紙條的信息稍微做改動、或者節點挖礦運氣好一點壞一點等等，當前區塊的 ID 都會 “ biu~ ”的發生改變。</li>
</ol><p>基於上述 1、2 點，如果閱讀足夠仔細的同學可能會有些頭大。在文章開頭爲了更好的描述，我在設計簡化區塊鏈系統的時候故意模棱兩可了幾個概念，這也許已經誤導到了部分同學。這裏不得不停下來和你一起修正下之前在你大腦中已經構建的區塊鏈世界觀。我們前面講道，“在節點的視野裏，大概每十分鐘會憑空產生一個建立在自己平行宇宙世界的神奇區塊”。如何正確去理解這句話呢？——擁有上帝之眼的你，可以這麼拆解問題、看待問題：</p>
<ol><li>同一個週期內，全網並不是產生唯一的一個區塊等待挖掘；每個節點事實上都在週期性的創造區塊和挖出區塊；只是在某一個節點的視野裏，它不能感知到另外一個節點上區塊的產生。爲何這裏要特別強調“在某一個節點的視野裏”，就是因爲我們剛剛講到，從區塊的視角來說，區塊的憑空產生，是基於即將與之相連的上一個區塊 ID；而從節點的視角來看，區塊的憑空產生是基於當前節點區塊鏈末尾的那個區塊 ID 產生的。</li>
<li>全網會盡力控制在一個週期內只有一個節點能夠成功挖出區塊，但是不能夠完全避免多個節點同時挖出區塊的可能性；如何盡力控制？比如說，當大夥挖礦的熱情高漲、工作效率提高，區塊會被埋在更深更廣的地方等。簡而言之，通過提高工作難度，來維持這個平衡。另外，值得注意的：產生區塊、挖出區塊、校驗區塊，他們的時間週期近乎相同。</li>
</ol><blockquote><strong><em>挖礦，本質是通過與或運算，去碰撞一個出一個滿足規則的隨機數。這個部分要細講的話，估計又可以寫出兩三千字來。我覺得到目前爲止，並不影響主軸知識點的講解，這一塊會作爲後續知識結構的完善被撰寫（計劃 1 月 24 日前完成）。感興趣的同學可以 Google 百度查閱下什麼叫“挖礦”、“工作量證明 POW”等。</em></strong></blockquote>
<p><strong>分叉</strong></p>
<p>現在，我們終於對“區塊”這個概念有了更全面的認識，文章開頭講的故事就可以繼續展開來絮叨絮叨：</p>
<p>假如幾乎同一時間，「中國上海浦東新區張衡路」上的節點和「美國紐約曼哈頓第五大道」上的節點異口同聲喊出來：“我挖到區塊了！裏面的小紙條都是有效的！獎勵歸我！”。其他節點也幾乎同時參與了對這兩個區塊的校驗，結果發現這倆都沒毛病，各節點也開始犯困，因爲在他們的視野裏他們並不清楚最後哪一個區塊應該會被主鏈接納。算了！都連在自己區塊鏈尾巴上吧，這時尷尬了，區塊鏈硬生生的被分叉了！</p>
<img class="content-image" src="http://pic1.zhimg.com/70/v2-adf7653af863541e4cc811b04b86bd20_b.jpg" alt="">
<p>你肯定在想，那還得了，這種情況繼續下去，每個節點的區塊以及他們整理維護的小紙條都將變得不一樣，這已經嚴重違背了區塊鏈世界裏第一大最基本原則——所有節點共同維護同一份數據。所以，爲了解決這個問題，區塊鏈世界引入了一條新的規則——擁有最多區塊的支鏈將是真正被認可有價值的，較短的支鏈將會被直接 Kill 掉。</p>
<p>我們大夥都知道挖礦的過程存在巨大的工作量（如果沒有任何難度，把區塊扔在人羣中，必然同一時間發現區塊的節點數量將大大增加，也就會產生無數的支鏈，通過這個例子，你大概也就能夠明白，區塊鏈世界爲什麼需要設置工作難度了吧），並且在計算機的硅基世界裏，不可能出現所謂 “同時” 的概念，哪怕納秒的差別，那也總是會有先後順序。所以理論上，“分叉”的這種僵局很快會在下一個區塊被挖掘出來（以及校驗區塊）的時候被打破，實在不行下下個，或者下下下個……總之機制可以讓整個分叉的區塊鏈世界迅速穩定下來。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-ea23da89340837df3e6e0f6cd2d072d1_b.jpg" alt="">
<p>“分叉”這種僵局在確認下一個區塊（以及校驗小紙條）的時候被打破，從而整個區塊鏈世界迅速穩定下來</p>
<p>就上圖而言，所有基於張衡路節點挖礦獲得的區塊以及後續區塊的那條分支被視爲有價值，最終會全部保留了下來；其他節點會統一效仿那個擁有更長分支鏈的節點所做的決策。另外，值得一提的是，同一時間，較短分支上的區塊會立即丟棄，而裏面的小紙條也會隨之釋放出來，被重新標記上“未確認”。</p>
<p><strong>“雙花”與“51% 攻擊”</strong></p>
<p>你可能已經開始困惑或者有點興奮，末尾幾個區塊的排序在修復過程中，因爲時間差肯定會產生一些模棱兩可的地方，這往往會給數據安全埋下一顆雷。一個最簡單的假設——我記錄的一張小紙條很不巧地被歸在了一條較短的支鏈上，這條支鏈在競爭過程中理所當然輸掉了比賽，區塊被丟棄、小紙條被無情的貼上“未確認”的標籤。在等待下次區塊重新確認的過程中，這個時間差內，我，好像、似乎可以做點什麼壞事 ԅ(¯﹃¯ԅ) ，就比如說“雙花”（雙花，花兩次，雙重支付的意思）</p>
<p>你腦海中也許很快浮過的這樣的構想，可不可能通過下面這種方法觸發雙花問題的產生，從而讓我不勞而獲：</p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-82f01cc16cbd1f3227ae107fb75723db_b.jpg" alt="">
<ol><li>假設有一個名叫 X-Man 的壞傢伙，他控制了一個計算機節點，這個節點擁有比地球上任何一個節點算力都強大的計算機集羣。</li>
<li>首先，X-Man 事先創造了一條獨立的（不去廣而告之）、含有比較多區塊的鏈條。其中一個區塊裏放着“X-Man 轉賬給 X-Man 1000 元”的紙條。</li>
<li>接着，X-Man 跟張三購買了一部手機，他在小紙條上記錄下“X-Man 轉賬給張三 1000 元”；這條信息被三次確認後（即三個區塊被真實挖出、校驗和連接），然後，張三把手機給了 X-Man。</li>
<li>X-Man 拿到手機之後，按下機房的開關，試圖將先前已經創造的區塊鏈條連接在自己這個節點區塊鏈的末尾。</li>
<li>大功告成，X-Man 擁有了一條更長的區塊鏈條，那些較短、存放着“X-Man 轉賬給張三 1000 元”的區塊鏈，以及在區塊鏈世界裏那則真實轉賬行爲被一同成功銷燬。（?）</li>
</ol><p>事實真的如此嗎？在這裏我可以很負責任的說，too young too simple，區塊鏈世界規則的制定遠比我們想象的要健全很多，還記得我們之前講的“區塊的 ID 至少會跟區塊內所有小紙條的集合、即將與之相連的上一個區塊 ID 以及挖礦節點的運氣值等因素相關”。 在這裏，正是因爲打算連接到主鏈的時候，事先準備的鏈子會意識到馬上要連接上的那個區塊 ID 發生了改變，隨之而來的是後面所有區塊 ID 都瞬間。節點不得不重新對後續區塊的解鎖以及對區塊內小紙條的校驗。</p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-5ac7eb9be1b35362b75443020e59974a_b.jpg" alt="">
<p>在區塊鏈的世界，重新計算的行爲等同於把自己（節點）置身於同一個起跑線，跟世界上其他所有的節點一同競爭挖礦。你會說，我擁有更強大的計算能力，但是對不起，跟你競爭的對象並不是第五大道、南京西路、香榭麗舍大道上的某一個節點，而是全球所有算力的集合，在這個集合中，你擁有的算力永遠都只是一個很小的子集。所以，根據區塊鏈算力民主、少數服從多數的基本原則，這個構想將永遠不會成立。</p>
<p><strong>除非....</strong></p>
<p>你控制着全球 51%的算力，這也就是區塊鏈世界裏另外一個著名的概念，叫做“51% 攻擊”，但這也僅僅是一個理論值，在真實世界裏這樣的攻擊我個人覺得是很難發動起來的，這裏面就牽涉到很多經濟、哲學甚至政治的因素。舉個最簡單的例子：X-Man 爲了回滾剛剛發生的一筆交易記錄，成功發起了 51% 攻擊，這意味着很快整個區塊鏈系統將會崩盤，因爲這次攻擊已經嚴重傷害到人們對這套系統的信任，接着比特幣開始暴跌至幾乎一文不值；但是這個擁有 51% 算力的 X-Man 原本完完全全可以通過挖礦的方式獲取更多收益，購買無數的 iPhone 手機。那他不是腦袋不是壞了還能是啥？對 51% 攻擊話題感興趣的同學可以閱讀這篇文章《<a href="http://8btc.com/article-1949-1.html">什麼是比特幣 51% 攻擊？</a>》。</p>
<p>至此，我覺得區塊鏈最基礎、最核心的知識已經全部講完了（除了挖礦內部實現原理，作爲一個遺憾留在這裏，有時間會完善掉），相信你已經對它有了一個宏觀的認識。另外，由於這篇文章採用了適當抽象、類舉的敘事方式，中間或多或少有些地方會跟區塊鏈底層嚴謹的技術實現有出入，歡迎大家來糾錯。另外，也是受限於自己知識結構的缺失，這篇文章會隨着我對區塊鏈更深入認識後，隨時進行修訂，最後更新時間可參考該回答下方的時間戳。</p>
<p>--</p>
<p><strong>問答部分</strong></p>
<p><strong>去中心化的系統中，到底是誰在發行貨幣？是無限量發行嗎？</strong></p>
<p>比特幣的貨幣是通過挖礦（工作量證明）來發行的，總數量是通過程序寫死了 2100 萬個，而第一筆區塊獎勵也是硬編碼寫死的。礦工挖出一個區塊所獲得的獎勵，每隔 21 萬個區塊將減少一半，按照平均 10 分鐘挖出一個區塊的執行效率，也就就說差不多每四年會銳減一次。2009 年 1 月起每個區塊獎勵 50 個比特幣，2012 年 11 月減半爲每個區塊 25 個比特幣，2016 年 7 月減半爲 12.5 個比特幣。基於這個規則，到 2140 年，所有比特幣(20,999,999,980)將全部發行完畢，之後不會再有新的比特幣產生。</p>
<p><strong>礦工節點的收益除了挖出區塊以外還有哪些？</strong></p>
<p>礦工節點的收益主要由兩部分組成：1）挖出新區塊的獎勵；2）挖出新區塊內所含交易的交易費。但就目前來說，一個區塊內的交易費大概只佔到礦工總收入的 0.5%甚至更少，大部分收益主要還是來自於挖礦所得的比特幣獎勵。然而，隨着挖礦獎勵的遞減，以及每個區塊中包含的交易數量增加，交易費在礦工收益中所佔的比重將會逐漸增加。在 2140 年之後，所有的礦工收益將完全由交易費構成。</p>
<p><strong><strong>參考</strong></strong></p>
<ul><li>中心化與去中心化 <a href="https://www.douban.com/note/624421270/">https://www.douban.com/note/624421270/</a></li>
<li>圖說區塊鏈 <a href="https://book.douban.com/subject/27084306/">https://book.douban.com/subject/27084306/</a></li>
<li>區塊鏈是什麼，如何簡單易懂地介紹區塊鏈？ <a href="https://www.zhihu.com/question/37290469">https://www.zhihu.com/question/37290469</a></li>
<li>什麼是比特幣 51%攻擊？ <a href="http://8btc.com/article-1949-1.html">http://8btc.com/article-1949-1.html</a></li>
<li>區塊鏈與新經濟：數字貨幣 2.0 時代 <a href="https://book.douban.com/subject/26804497/">https://book.douban.com/subject/26804497/</a></li>
<li>詳解比特幣原理和運行機制 <a href="https://www.youtube.com/watch?v=P4seQcP77H4">https://www.youtube.com/watch?v=P4seQcP77H4</a></li>
<li>區塊鏈是什麼：從技術架構到哲學核心 <a href="https://v.qq.com/x/page/x0518nuh2z7_0.html">https://v.qq.com/x/page/x0518nuh2z7_0.html</a></li>
<li>區塊鏈核心算法解析 <a href="https://book.douban.com/subject/27081206/">https://book.douban.com/subject/27081206/</a></li>
<li>深入理解比特幣的安全性及程式交易安全性與相關的密碼學原理 <a href="https://www.youtube.com/watch?v=3w1Tg3B_oKQ">https://www.youtube.com/watch?v=3w1Tg3B_oKQ</a></li>
<li>深度瞭解區塊鏈——拜占庭將軍問題深入探討 <a href="https://wallstreetcn.com/articles/338061">https://wallstreetcn.com/articles/338061</a></li>
<li>精通比特幣 - 挖礦與共識 <a href="http://zhibimo.com/read/wang-miao/mastering-bitcoin/Chapter08.html">http://zhibimo.com/read/wang-miao/mastering-bitcoin/Chapter08.html</a></li>
</ul>
</div>
</div>




</div>


</div>
</div><script type="“text/javascript”">window.daily=true</script>
                </div>

                <div class="feat share">
                    <a href="//twitter.com/share" class="popup">
                        <span class="icon-twitter"></span>
                    </a>
                </div>

                 <div style="display:none; position: relative;">
                    <iframe style="display:none;"></iframe>
                    <script type="text/javascript">
                      var data = {
                        placementid: '1676323079284163_1676324105950727',
                        format: '300x250',
                        testmode: false,
                        onAdLoaded: function(element) {
                          console.log('Audience Network ad loaded');
                          element.style.display = 'block';
                        },
                        onAdError: function(errorCode, errorMessage) {
                          console.log('Audience Network error (' + errorCode + ') ' + errorMessage);
                        }
                      };
                      (function(w,l,d,t){var a=t();var b=d.currentScript||(function(){var c=d.getElementsByTagName('script');return c[c.length-1];})();var e=b.parentElement;e.dataset.placementid=data.placementid;var f=function(v){try{return v.document.referrer;}catch(e){}return'';};var g=function(h){var i=h.indexOf('/',h.indexOf('://')+3);if(i===-1){return h;}return h.substring(0,i);};var j=[l.href];var k=false;var m=false;if(w!==w.parent){var n;var o=w;while(o!==n){var h;try{m=m||(o.$sf&&o.$sf.ext);h=o.location.href;}catch(e){k=true;}j.push(h||f(n));n=o;o=o.parent;}}var p=l.ancestorOrigins;if(p){if(p.length>0){data.domain=p[p.length-1];}else{data.domain=g(j[j.length-1]);}}data.url=j[j.length-1];data.channel=g(j[0]);data.width=screen.width;data.height=screen.height;data.pixelratio=w.devicePixelRatio;data.placementindex=w.ADNW&&w.ADNW.Ads?w.ADNW.Ads.length:0;data.crossdomain=k;data.safeframe=!!m;var q={};q.iframe=e.firstElementChild;var r='https://www.facebook.com/audiencenetwork/web/?sdk=5.3';for(var s in
                  data){q[s]=data[s];if(typeof(data[s])!=='function'){r+='&'+s+'='+encodeURIComponent(data[s]);}}q.iframe.src=r;q.tagJsInitTime=a;q.rootElement=e;q.events=[];w.addEventListener('message',function(u){if(u.source!==q.iframe.contentWindow){return;}u.data.receivedTimestamp=t();if(this.sdkEventHandler){this.sdkEventHandler(u.data);}else{this.events.push(u.data);}}.bind(q),false);q.tagJsIframeAppendedTime=t();w.ADNW=w.ADNW||{};w.ADNW.Ads=w.ADNW.Ads||[];w.ADNW.Ads.push(q);w.ADNW.init&&w.ADNW.init(q);})(window,location,document,Date.now||function(){return+new Date;});
                    </script>
                    <script type="text/javascript" src="https://connect.facebook.net/en_US/fbadnw.js" async></script>
                  </div>

                

                
                    <a rel="next" href="http://znews.site/post/201801/19/011907-9666848/" id="next">
                        <span class="nav-title nav-title-next"></span> &rarr;
                    </a>
                
                
                    <a rel="prev" href="http://znews.site/post/201801/19/011906-9666719/" id="prev">
                        &larr; <span class="nav-title nav-title-prev"></span>
                    </a>
                
            </article>
        </section>

        <footer>
	
</footer>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://znews.site/js/main.js"></script>




<!-- Syntax highlighting -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
