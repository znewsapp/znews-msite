<!DOCTYPE html>



 <html class="no-js"> 
<head>
    <title>爲什麼《絕地求生》畫面差還挑顯卡？ &middot; ZNews</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="content-language" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="">
    <meta name="description" content="">

    
    <meta property="og:image" content="https://pic4.zhimg.com/v2-c42b78411126c099f79a619937bdc7cf.jpg">
    <meta property="og:type" content="article">
    

    
    <meta property="og:url" content="http://znews.site/post/201712/29/122907-9663228/">
    

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="http://znews.site/css/main.css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,300,700|Lora:400,700,400italic" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/tomorrow.min.css" />
    
</head>
<body>

    <div class="off-canvas">
    <figure class="avatar">
        <img src="http://znews.site/img/zicon.png" title="">
    </figure>
    <div class="bio">
        
        
    </div>
    <nav>

        

        

        <ul>
            <li><a target="_blank" href="http://znews.site/index.xml">RSS feed</a></li>
            <li><a href="mailto:admin@znews.site" target="_top">Contact us</a></li>
        </ul>

        

        <ul>
        
        </ul>
    </nav>
</div>


    <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
    <script>
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    </script>

    <script>
    googletag.cmd.push(function() {
      googletag.defineSlot('/23865961/testad1', [300, 250], 'div-gpt-ad-1470795637655-0').addService(googletag.pubads());
      googletag.pubads().enableSingleRequest();
      googletag.enableServices();
    });
    </script>

    <div class="site-wrapper">
        <header>
	<div class="h-wrap">
		
		<h1 class="title"><a href="http://znews.site/">ZNews</a></h1>
		
		<a class="menu-icon" title="Menu"><span class="lines"></span></a>
	</div>
</header>

        <section class="single-wrap">
            <article class="single-content" itemscope itemtype="//schema.org/BlogPosting">
                <div class="feat">
                    <h5 class="page-date">
                    <time datetime="" itemprop="datePublished">
                    29. December 2017
                    </time>
                    </h5>
                </div>
                <h1 class="page-title" itemprop="name headline">爲什麼《絕地求生》畫面差還挑顯卡？</h1>

                <div id='div-gpt-ad-1470795637655-0' style='height:250px; width:300px;'>
                <script>
                googletag.cmd.push(function() { googletag.display('div-gpt-ad-1470795637655-0'); });
                </script>
                </div>

                <div itemprop="articleBody">
                    <div class="main-wrap content-wrap">
<div class="headline">

<div class="img-place-holder"></div>



</div>

<div class="content-inner">




<div class="question">
<h2 class="question-title"></h2>

<div class="answer">



<div class="content">
<img class="content-image" src="http://pic3.zhimg.com/70/v2-105061a9f3b3e26fb3a08456949ec07a_b.jpg" alt="">
<p>我從一個開發者的角度來回答一下這個問題吧，首先，UE4 是真的算比較吃配置的引擎了。題主所說的，畫面不好這點我不敢苟同，額，敢問多少人進遊戲後都會哲學三問，我在哪？敵人在哪？誰在打我？好吧，其實這都是引擎效果的鍋。那麼到底哪些地方是特別耗資源的呢？(以下分析基於我玩遊戲觀察到的，沒有去深入遊戲做逆向分析，如有偏差，歡迎指正)</p>
<p>1.<strong>SSAO- 屏幕空間 AO</strong>，如果你開默認配置，站在牆邊，你會發現，牆上似乎有一圈你的外輪廓。這就是實時計算的屏幕空間 AO 了，AO 是當兩個物體靠的很近時，互相會遮擋某些方向的間接光照，所以物體在靠近的時候會有明顯的暗區。UE4 的 AO 分爲實時 AO 和烘焙 AO，烘焙的 AO 都是已經預計算好的信息存在光照貼圖中，載入時不需要耗費計算資源，只需要花費顯存的位寬。而實時的 AO 也就是屏幕空間 AO 就特別費計算資源了。每一幀渲染時，會在屏幕空間渲染出一張 AO 貼圖，然後這張圖在渲染管線的後期再進行混合，得出的畫面就非常有層次感。SSAO 在光照渲染的階段，會耗費大量的時間，所以帶來的後果就是拖慢了幀率。SSAO 也會在草地內形成暗區，所以爲了防止伏地魔，關愛你的顯卡，最好關掉這貨。當然做開發的盆友，特別是做 VR 遊戲的盆友，如果發現一直優化幀率一直上不去，不妨檢查一下，你會有驚喜的。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-c5d46967f1f0af9d6dfbba41327995c9_b.jpg" alt="">
<img class="content-image" src="http://pic2.zhimg.com/70/v2-ec07a265d7b5c07eb5a4f2d73a3987dd_b.jpg" alt="">
<p>2.<strong>宏大的開放地圖</strong>。是的，絕地求生的地圖很大，而且是一次性加</p>
<p>載完，沒有做流關卡。雖然得益於 UE4 的 Landscape 自動平滑的 LOD(細節層次，就是你走的越近，模型越精細)，地形本身不會耗費太多資源(作爲一個曾經把重慶的奉節縣，雲陽和巫山的局部真實地形做到 UE 裏的人，表示 Landscape 超級省資源)。不過地面上的建築還是面特別高的，所以整個場景的最小面數都不會太低，這意味着內存開銷不會太低，好在絕地求生裏引入了 Simplygon 插件，來優化整個場景的面數問題(就是站在遠處用 15 倍鏡看橋之類的東西，會曉得凹凸不平，以及蛋糕房子的始作俑者)，所以本質來說場景總面數還是不少，所以在渲染管線前期需要載入的數據比較龐大，自然也就吃配置咯。因爲所有的場景頂點信息、着色器信息、貼圖、LOD 模型等等都會存到內存中，所以這個遊戲內存開銷很大，並且前期對這些數據進行處理的是 CPU（各種剔除工作，邏輯運算都是 CPU 完成的）。</p>
<p>3.<strong>草地</strong>。各位 LYB 的最愛，對絕地求生這個遊戲而言，草地絕對是整個遊戲至關重要的精髓，而且草地會直接影響遊戲平衡性。而草地的渲染是真的真的費資源。我們看到的草地，他的本質實際上是一個面的貼圖，再加上 Mask 材質做成的，Mask 材質中會有一張貼圖，表示哪裏是鏤空的，哪裏是可見的，就好像網襪一樣(咦？)。在我們開發過程中對畫面的幀率優化有個很重要的指標就是着色器複雜度，着色器複雜度表示了當前材質渲染着色的時候計算量的大小，而 Mask 材質屬於着色器複雜度第二高的類型(第一是透明材質)。而另外一個非常重要的問題是，Mask 材質的可見性檢測實在着色階段才做的。按照一般的渲染管線，首先是可視化剔除，就是把場景中看不見的頂點和物體剔除，後面渲染的時候就不處理那些頂點信息。然後是遮擋剔除，就是去掉那些被遮住頂點，進一步減少管線後期的計算量的。但是 Mask 材質不會做遮擋剔除，所以其後面的所有頂點都會參與到後期的計算中，然後在着色的時候被着色器 pia ji 一下蓋住（Over Draw），前面所有的計算都浪費了……而且要營造出層層疊疊的，可供伏地魔趴在裏面的草原，就需要非常多的面片。所以任何戶外遊戲的草地都是有做 LOD 的，而且最高層級的 LOD 一定是沒有面的(所以爲什麼絕地求生裏遠處的草坪就空了)，但好死不死草地有是影響遊戲平衡的重要因素，所以絕地求生的開發人員表示，我能怎麼辦，我也很絕望啊。</p>
<img class="content-image" src="http://pic2.zhimg.com/70/v2-94bdd927b38791f5a7937eb7612dce45_b.jpg" alt="">
<img class="content-image" src="http://pic1.zhimg.com/70/v2-54dcc2188ba92458bd8340d85cf4b1c4_b.jpg" alt="">
<img class="content-image" src="http://pic2.zhimg.com/70/v2-3ca09f9ad126a3ff8a47c464b1f9656d_b.jpg" alt="">
<img class="content-image" src="http://pic2.zhimg.com/70/v2-c3401927f8df3ae86a23510383f71cc1_b.jpg" alt="">
<p>4.<strong>材質和貼圖</strong>。首先，絕地求生的材質都是真真的次時代材質(再次不服題主說的畫質差的問題)，次時代材質最大的特點就是，材質會隨着你的觀察角度不同，距離不同表現出不同的細節和效果，最終實現"物理正確"的還原，給用戶的直觀感受就是真實(因爲符合我們平時的視覺習慣相同)。打個比方，絲襪大家都看過吧(不開車，不開車，沒看過的自己去搜圖片)，大家如果仔細觀察絲襪就會發現，絲襪不管從哪個角度看，邊緣都會比中間透光小(黑絲之所以性感，正是因爲黑絲的這個效果可以有效勾勒和強調腿型，捂臉)。而這種效果必須得是根據觀察角度不同而變換的，這就是材質的意義。所以每一幀渲染，都需要進行大量的材質效果運算(就是前面說的着色器複雜度啦)而很多運算需要用到細節貼圖，所以貼圖的量也很大，貼圖和材質，一個需要顯存，一個需要流處理器。嗯，，，這就是爲啥得用好顯卡。</p>
<p><strong>絲襪材質的製作請看這裏：</strong><a href="https://zhuanlan.zhihu.com/p/32064456">【多圖】【嚴肅的技術帖】用 UE4 做黑絲材質</a></p>
<img class="content-image" src="http://pic4.zhimg.com/70/v2-9ad1d2801e97d9cf3f74ca2178776e67_b.jpg" alt="">
<img class="content-image" src="http://pic3.zhimg.com/70/v2-49eb936fa8b7b140543a854c1af15a46_b.jpg" alt="">
<p>5.<strong>AA- 抗鋸齒</strong>。現代遊戲中，沒有抗鋸齒都不好意思拿出來見人了，然而要知道，抗鋸齒需要的是非常非常高的性能開銷。UE4 中默認的抗鋸齒是 TAA，相對於 MSAA 這種渲染 2 倍的分辨率再降採樣的暴力算法，TAA 則更省性能。TAA 的抗鋸齒算法其實也是類似於 MSAA，進行超分辨率渲染，然後再降採樣，但是 TAA 將這個超分辨率渲染的過程分攤到了若干個幀上，也就是 1+2+3&gt;&gt;&gt;4 的模式。這樣渲染的好處是，在畫面比較穩定的情況下，抗鋸齒效果忒好，缺點就是快速移動的畫面或物體會有鬼影。</p>
<p>6.<strong>動態模糊</strong>。動態模糊就是在你移動的時候，畫面會出現因爲移動造成的模糊效果。動態模糊是在後期處理的時候進行的，也就是當前幀渲染、着色完成後的操作，在後期處理中，動態模糊也算是比較費的部分</p>
<p>先就想到這麼多，手機碼字，回頭再補圖和調整格式吧。其實開發商已經做過了很多優化和處理工作了，關於這個，後面我再詳細補充關於絕地求生大逃殺到底優化了哪些內容的部分。對於一款早期預覽版遊戲來說 PUBG 已經做得很不錯了，但是畢竟不是正式發售，開發週期也短，所以出現一些優化不好的問題實在是太正常了，正式版體驗服我玩過了，還吃了雞，各種程度上的優化進步。那些一天到晚吼着優化渣的盆友們，<strong>嘴炮說兩句是真的很容易，來，跟我一起研讀一下 UE4 的源代碼，讓你知道一下平底鍋是鐵做的</strong>(•̀ω•́)✧</p>
<img class="content-image" src="http://pic3.zhimg.com/70/v2-bc6f4d46725e23f49b0c6f95d1c09dfa_b.jpg" alt="">
<p>我想再聲明一下立場，我跟這款遊戲唯一的利益關係就是我花了 98 給 G 胖。講道理我其實也並不是這個遊戲的狂熱分子，對於我來說，這款遊戲只是我和朋友們一起消遣的工具，他們不玩的時候，我會去玩玩守望先鋒，到動物之森裏種種花，所以<strong>我沒有，也沒必要爲這款遊戲洗什麼，我的回答只是想提供給大家另一個不同的視角去看待這款遊戲。</strong></p>
<p>因爲本人正是從事 UE4 開發的，漫遊、遊戲我都做過。所以在我看來，這是一款值得我用敬畏之心去看待的遊戲。因爲我知道，做一款遊戲是有多少投入，多少心血在裏面，有多少的難關要去攻克。所以我不認爲自己有那個權力去審判別人的遊戲和付出的心血。</p>
<p>在評論區裏有很多人問，同樣配置，爲什麼那些 3A 大作能夠做到如此真實，而且非常流暢呢？我始終還是那句話回答：<strong>一個遊戲，最終的視覺效果，是取決於投入的人力、物力的。</strong></p>
<p>有的人又要說：藍洞這一波賺翻了，爲什麼還是沒有去優化呢？</p>
<p>我的回答是：首先，賺到錢要招人擴大團隊，新人進來後要熟悉整個系統的架構，熟悉完過後要填老人的坑，然後要去做優化，優化過後又需要 QC 的檢查，檢查完過後還可能要再次修改。我說這麼多，是想告訴大家，<strong>開發是需要時間的，優化更是。</strong></p>
<p>在這次更新答案的最後，我想說一句：<strong>面對一個作品，你可以質疑，但是請不要用高高在上的姿態去審判別人的作品。</strong></p>
<blockquote><strong>Don't judge. </strong><br><strong>----Rick</strong></blockquote>
</div>
</div>




</div>


</div>
</div><script type="“text/javascript”">window.daily=true</script>
                </div>

                <div class="feat share">
                    <a href="//twitter.com/share" class="popup">
                        <span class="icon-twitter"></span>
                    </a>
                </div>

                 <div style="display:none; position: relative;">
                    <iframe style="display:none;"></iframe>
                    <script type="text/javascript">
                      var data = {
                        placementid: '1676323079284163_1676324105950727',
                        format: '300x250',
                        testmode: false,
                        onAdLoaded: function(element) {
                          console.log('Audience Network ad loaded');
                          element.style.display = 'block';
                        },
                        onAdError: function(errorCode, errorMessage) {
                          console.log('Audience Network error (' + errorCode + ') ' + errorMessage);
                        }
                      };
                      (function(w,l,d,t){var a=t();var b=d.currentScript||(function(){var c=d.getElementsByTagName('script');return c[c.length-1];})();var e=b.parentElement;e.dataset.placementid=data.placementid;var f=function(v){try{return v.document.referrer;}catch(e){}return'';};var g=function(h){var i=h.indexOf('/',h.indexOf('://')+3);if(i===-1){return h;}return h.substring(0,i);};var j=[l.href];var k=false;var m=false;if(w!==w.parent){var n;var o=w;while(o!==n){var h;try{m=m||(o.$sf&&o.$sf.ext);h=o.location.href;}catch(e){k=true;}j.push(h||f(n));n=o;o=o.parent;}}var p=l.ancestorOrigins;if(p){if(p.length>0){data.domain=p[p.length-1];}else{data.domain=g(j[j.length-1]);}}data.url=j[j.length-1];data.channel=g(j[0]);data.width=screen.width;data.height=screen.height;data.pixelratio=w.devicePixelRatio;data.placementindex=w.ADNW&&w.ADNW.Ads?w.ADNW.Ads.length:0;data.crossdomain=k;data.safeframe=!!m;var q={};q.iframe=e.firstElementChild;var r='https://www.facebook.com/audiencenetwork/web/?sdk=5.3';for(var s in
                  data){q[s]=data[s];if(typeof(data[s])!=='function'){r+='&'+s+'='+encodeURIComponent(data[s]);}}q.iframe.src=r;q.tagJsInitTime=a;q.rootElement=e;q.events=[];w.addEventListener('message',function(u){if(u.source!==q.iframe.contentWindow){return;}u.data.receivedTimestamp=t();if(this.sdkEventHandler){this.sdkEventHandler(u.data);}else{this.events.push(u.data);}}.bind(q),false);q.tagJsIframeAppendedTime=t();w.ADNW=w.ADNW||{};w.ADNW.Ads=w.ADNW.Ads||[];w.ADNW.Ads.push(q);w.ADNW.init&&w.ADNW.init(q);})(window,location,document,Date.now||function(){return+new Date;});
                    </script>
                    <script type="text/javascript" src="https://connect.facebook.net/en_US/fbadnw.js" async></script>
                  </div>

                

                
                    <a rel="next" href="http://znews.site/post/201712/29/122907-9663246/" id="next">
                        <span class="nav-title nav-title-next"></span> &rarr;
                    </a>
                
                
                    <a rel="prev" href="http://znews.site/post/201712/28/122822-9663240/" id="prev">
                        &larr; <span class="nav-title nav-title-prev"></span>
                    </a>
                
            </article>
        </section>

        <footer>
	
</footer>
    </div>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://znews.site/js/main.js"></script>




<!-- Syntax highlighting -->
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
